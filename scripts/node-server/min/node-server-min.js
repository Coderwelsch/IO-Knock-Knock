function getJSON(e,t){return e&&t?void filesys.readFile(e,"utf8",function(e,o){o&&t(JSON.parse(o))}):(console.log("Url Or Callback Not Set: ",e,t),!1)}function writeJSON(e,t,o){filesys.writeFile(e,JSON.stringify(t,null,4),function(e){o(e)})}function fileExists(e,t){filesys.exists(fullPath,function(e){t(e)})}var sys=require("util"),http=require("http"),path=require("path"),url=require("url"),filesys=require("fs"),ws=require("nodejs-websocket"),childProcess=require("child_process"),mimeTypes=require("./mime-types"),httpServer,wsServer,webSocketConnection,webSocketData="",requestCallbackForSearchedDevices="/newDevicesFound";rootDir=process.cwd()+"/",wwwDir=rootDir+"www-data/",dataDir=rootDir+"../../device-data/",availableDevicesJson=dataDir+"available-devices.json",authorizedDevicesJson=dataDir+"authorized-devices.json",searchedDevicesJson=dataDir+"searched-devices.json",indexLocation="index.html",httpServer=http.createServer(function(e,t){console.log(e),t.writeHead(200,{"Content-Type":"text/plain"}),t.write(),t.end()}).listen(8080),console.log("WebServer started..."),wsServer=ws.createServer(function(e){e.on("text",function(e){console.log("WebSocket Received Data: "+e)}),e.on("close",function(e,t){console.log("WebSocket Connection Closed")}),setInterval(function(){""!==webSocketData&&(console.log("Send New Device Data To WebSocket Connection"),e.sendText(webSocketData),webSocketData="")},100)}).listen(8081),console.log("WebSocket Server Started...");